<div *transloco="let t" class="dashboard-root">
    <header tuiNavigationHeader class="flex justify-between">

        <div class="lg:hidden">
            <button (click)="openSideDrawer.set(true)" class="!text-white" mat-icon-button>
                <mat-icon fontIcon="hamburger-fill"></mat-icon>
            </button>
        </div>

        <div class="page-title">
            <div class="logo flex justify-center items-center">
                <img width="80" height="75" ngSrc="/images/global/logo.png" priority>
            </div>
            <h4 class="hidden lg:block">{{appName}}</h4>
        </div>

        <div class="grid grid-flow-col gap-4 items-center">

            <div class="hidden lg:block">
                <button class="!text-white" (click)="toggleTheme()" mat-icon-button>
                    <mat-icon fontIcon="dark-mode-fill"></mat-icon>
                </button>
            </div>

            <div>
                User
            </div>
        </div>
    </header>

    <div class="flex">
        <aside class="!pt-8 !pb-4 aside" *ngIf="(dashboardService.breakpoint$ | async) === 'desktopLarge'"
            [tuiNavigationAside]="expandSideNav()">

            <a tuiAsideItem matRipple [routerLink]="[ROUTE.PUBLISHED]">
                <mat-icon fontIcon="bookshelf-fill"></mat-icon>
                {{t(KEY.PUBLISHED)}}
            </a>

            <tui-aside-group *ngIf="supportedLanguages().length > 0">
                <button [routerLink]="[ROUTE.NEW, supportedLanguages()[0].code]" automation-id="setting" tuiAsideItem
                    tuiChevron matRipple type="button">
                    <mat-icon fontIcon="add-note-outline"></mat-icon>
                    {{t(KEY.ADD_NEW)}}
                    <ng-template>

                        <a *ngFor="let language of supportedLanguages()" [routerLink]="[ROUTE.NEW, language.code]"
                            tuiAsideItem matRipple type="button" class="content">
                            {{language.label}}
                        </a>

                    </ng-template>
                </button>
            </tui-aside-group>

            <a [routerLink]="[ROUTE.DRAFT]" tuiAsideItem matRipple>
                <mat-icon fontIcon="note-outline"></mat-icon>
                {{t(KEY.DRAFT)}}
            </a>


            <footer>

                <a [routerLink]="[ROUTE.EDITORS]" tuiAsideItem matRipple type="button">
                    <mat-icon fontIcon="spark-user-outline"></mat-icon>
                    {{t(KEY.EDITORS)}}
                </a>

                <a [routerLink]="[ROUTE.SETTINGS]" tuiAsideItem matRipple type="button">
                    <mat-icon fontIcon="settings-outline"></mat-icon>
                    {{t(KEY.SETTINGS)}}
                </a>

                <button tuiAsideItem matRipple type="button" (click)="expandSideNav.set(!expandSideNav())">
                    <mat-icon [fontIcon]="expandSideNav() ? 'chevron-left-fill' : 'chevron-right-fill' "></mat-icon>

                    {{ expandSideNav() ? 'Collapse' : 'Expand' }}
                </button>
            </footer>



        </aside>


        <tui-drawer *tuiPopup="openSideDrawer()" direction="left" class="drawer relative" [overlay]="true"
            (click.self)="onClose()">
            <div class="flex gap-4 justify-between items-center mobile-header">
                <h4>{{appName}}</h4>
                <button (click)="openSideDrawer.set(false)" class="!text-white" mat-icon-button>
                    <mat-icon fontIcon="close-fill"></mat-icon>
                </button>
            </div>

        </tui-drawer>

        <main tuiNavigationMain class="!block">
            <nav compact tuiSubheader [style.position]="'sticky'">
                <tui-breadcrumbs [itemsLimit]="10">
                    <ng-container *ngFor="let item of breadcrumbs; let last = last">
                        <ng-container *ngIf="last">
                            <strong *tuiItem tuiFade>
                                {{ item }}
                            </strong>
                        </ng-container>
                        <ng-container *ngIf="!last">
                            <button *tuiItem tuiLink type="button">
                                {{ item }}
                            </button>
                        </ng-container>
                    </ng-container>
                </tui-breadcrumbs>
            </nav>
            <router-outlet class="w-100 h-100"></router-outlet>
        </main>
    </div>
</div>